<!--
  ============================================================
  HUD (renderer/) ‚Äì PROJECT MAP
  ------------------------------------------------------------
  Role:
    - This is the web-based heads-up display (HUD) shown inside Electron.
    - Contains YouTube controls, playlist manager, step counter,
      telemetry status, Google Fit integration, and passport export.

  Structure:
    index.html       ‚Üí Loads HUD layout + scripts
    renderer.js      ‚Üí Main HUD logic (YouTube, Fit, playlists)
    passport.js      ‚Üí Passport export/logic
    style.css        ‚Üí Static HUD styling (no bundler)
    package.json     ‚Üí HUD-specific metadata (no build step)

  Notes:
    - No bundler, no Vite/Webpack. Everything is served as static files.
    - HUD is distinct from rv-app (learning studio).
    - Renderer receives data but does not compile, bundle, or transform it.
  ============================================================
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Run the World HUD</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body data-google-client-id="your-google-client-id.apps.googleusercontent.com">
    <div id="hud">
      <div class="row" id="google-auth-row">
        <button id="google-sign-in" type="button">Sign in with Google</button>
        <span id="google-auth-status" style="margin-left: 8px; opacity: 0.7;"></span>
      </div>
      <div class="row" id="youtube-playlist-row">
        <strong style="margin-right: 6px;">Playlist:</strong>
        <select id="youtube-playlists" disabled style="min-width: 220px;"></select>
        <button id="youtube-load" type="button" disabled>Load</button>
        <button id="youtube-prev" type="button" disabled>‚èÆÔ∏è</button>
        <button id="youtube-next" type="button" disabled>‚è≠Ô∏è</button>
        <button id="youtube-shuffle" type="button" disabled>üîÄ</button>
        <button id="youtube-refresh" type="button" disabled title="Refresh playlists">‚Üª</button>
        <label style="margin-left: 8px;">Volume</label>
        <input id="youtube-volume" type="range" min="0" max="100" step="1" value="50" disabled />
        <span id="playlist-status" style="margin-left: 10px; font-size: 0.85em; opacity: 0.7;"></span>
      </div>
      <div class="row">
        <strong>Tag:</strong>
        <button data-tag="Dreamcore">Dreamcore</button>
        <button data-tag="Ambient">Ambient</button>
        <button data-tag="Urban">Urban</button>
        <span id="current-tag" style="margin-left:12px; opacity: 0.6;"></span>
      </div>
      <div class="row">
        <strong>Time:</strong>
        <span id="session-time">00:00</span>
      </div>
      <div class="row">
        <strong>Steps:</strong>
        <span id="step-count">0</span>
        <span id="ws-status" style="margin-left: 10px; font-size: 0.8em; opacity: 0.7;">Connecting...</span>
      </div>
      <div class="sensor-row">
        <span>Steps: <strong id="hud-steps">0</strong></span>
        <span>BPM: <strong id="hud-bpm">--</strong></span>
        <span class="sensor-badge" id="hud-offline-badge" hidden>Offline</span>
      </div>
      <div class="row" id="fit-status-row" style="font-size: 0.85em; opacity: 0.75;">
        <span id="fit-status">Google Fit inactive</span>
      </div>
      <!-- Add to HUD for manual export button -->
      <div class="row">
        <button onclick="window.downloadSessionLog()">Download Log</button>
        <button id="passport-button" type="button">Passport üìñ</button>
        <button id="open-rv-app" type="button">Open RV Studio</button>
        <button id="hud-hide-button" type="button" style="margin-left: auto;">Hide HUD</button>
      </div>
    </div>

    <button
      id="hud-floating-toggle"
      type="button"
      title="Show HUD"
      hidden
      aria-controls="hud"
      aria-expanded="false"
    >HUD</button>

    <div id="youtube-player-container">
      <div id="youtube-player"></div>
      <div style="position: fixed; top: 10px; right: 10px; background: red; color: white; padding: 5px; z-index: 99999;">v7-FIXED</div>
    </div>

    <div id="fx-overlay" aria-hidden="true"></div>


    <script type="module">
      import { downloadLog } from './sessionLogger.js';
      window.downloadSessionLog = downloadLog;
    </script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="./passport.js?v=7" type="module"></script>
    <script src="./renderer.js?v=7" type="module"></script>
  </body>
</html>
